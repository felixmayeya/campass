define([],function(){function e(t,a){var a=a||{};this.opts=$.extend({},e.DEFAULTS,a),this.$el=$(t),this.myChart=echarts.init(this.$el[0]),this._bindDom(this.opts.type),this.opts.chartData&&(this.option=this._buildOption(this.opts.type,this.opts.chartData),this.myChart.setOption(this.option))}return e.DEFAULTS={clickable:!0,legend:!0,showTitle:!0,defaultColor:["rgba(90,184,222,1)","rgba(247,186,148,1)","rgba(94, 115, 139, 1)"],colorTrans:["rgba(90,184,222,0.2)","rgba(247,186,148,0.2)","rgba(94, 115, 139, 0.2)"],treeColor:["#ace1ef","#8ad7ed","#59c6e5","#2bb7e0","#009dcd","#0089bb","#0077a8","#536c7b","#00628b"],textColor:"#99999",loadingObj:{text:"loading",color:"#678098",textColor:"#678098",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0},mapType:mapType},e.prototype._bindDom=function(e){if("areaplot"===e||"lineplot"===e||"barplot"===e||"scatterplot"===e)this.opts.clickable===!0&&this.myChart.on("click",$.proxy(this._drill,this));else if("mapplot"===e){var t=this;this.myChart.on("legendselectchanged",function(e){t._resetVMap(e)})}else{if("treeplot"===e)return;if("hbarplot"===e)this.opts.clickable===!0&&this.myChart.on("click",$.proxy(this._renderSmBar,this));else if("hbarSelection"===e){var t=this;this.myChart.on("legendselectchanged",function(e){t._reloadYAxis(e),t._reloadDatatable(e)}),this.opts.clickable===!0&&this.myChart.on("click",$.proxy(this._renderSmBar,this))}else if("lineSelection"===e){var t=this;this.myChart.on("legendselectchanged",function(e){t._reloadDatatable(e)})}else if("barplotStack"===e)return}},e.prototype._buildOption=function(e,t){this.opts.chartData=t;var a="",i="";"0"===localStorage.getItem("LINK_STATUS")?(a="2016-04-26",i="2016-04-27"):smChartST.length>0&&smChartET.length>0&&(a=smChartST[swiper.activeIndex].substring(0,4)+"-"+smChartST[swiper.activeIndex].substring(4,6)+"-"+smChartST[swiper.activeIndex].substring(6,8),i=smChartET[swiper.activeIndex].substring(0,4)+"-"+smChartET[swiper.activeIndex].substring(4,6)+"-"+smChartET[swiper.activeIndex].substring(6,8));var o={title:{text:this.opts.title||"",subtext:""==a?"":a+" -- "+i,show:!0,left:"5%",itemGap:5,textStyle:{color:"#678098",fontSize:14,fontWeight:500},subtextStyle:{color:"#678098",fontSize:14,fontWeight:500}},toolbox:{show:!0,right:"5%",iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#999999"}},top:"0",feature:{restore:{title:Dynamic.analysis_tools7},saveAsImage:{title:Dynamic.analysis_tools6,backgroundColor:"rgba(0,0,0,0)"}}}},t=t;if(t&&t.series&&t.series.length>0||(t={yAxis:{name:"",data:[0]},xAxis:{name:"",data:[0]},series:[{name:"",data:[]}]}),"areaplot"===e||"lineplot"===e||"barplot"===e||"scatterplot"===e)var s=this._buildLine(t);else if("mapplot"===e)var s=this._buildMap(t);else if("treeplot"===e)var s=this._buildTree(t);else if("hbarplot"===e)var s=this._buildHBar(t);else if("hbarSelection"===e)var s=this._buildHBarSelection(t);else if("lineSelection"===e)var s=this._buildLineSelection(t);else if("barplotStack"===e)var s=this._buildBarStack(t);return o=$.extend({},o,s)},e.prototype.showLoading=function(){this.myChart.showLoading(this.opts.loadingObj)},e.prototype.hideLoading=function(){this.myChart.hideLoading()},e.prototype.resize=function(){this.myChart.resize()},e.prototype.injectData=function(e){this.option=this._buildOption(this.opts.type,e),this.myChart.setOption(this.option)},e.prototype._resetDate=function(e){var e=e;if(rtTime=startTime+"|"+endTime,rtTime!=drillTime){drillTime=rtTime,e.showLoading();var t=startTime,a=endTime;getChartData({projectID:projectID,startTime:t,endTime:a,url:btnUrl,rpType:e.opts.type,isSmallChartLoad:"false",chart:[e],timeZone:timeZone})}},e.prototype._renderSmBar=function(e){var t=e.dataIndex,a=this.opts.legendIdx||0;name=this.opts.chartData.yAxis.data[t],status=e.seriesName,swiperIdx=swiper.activeIndex,smChart=smChartObj[swiperIdx][0],"#/analysis/status"===location.hash&&(name=this.opts.chartData.yAxis.data[a][t]),$(".echarts_vBar"+swiperIdx).css("width","50%"),$(".echarts_lBar"+swiperIdx).css({width:"49%",height:"100%",display:"inline-block"}),this.resize(),smChart.resize(),smChart.showLoading(),smChart.opts.title=name,this._getBarByUrl(name,smChartST,smChartET,status)},e.prototype._getBarByUrl=function(e,t,a,i){var o,s=this,i=i||"",e=htmlDecode(e),r=timeZoneChange(t[swiper.activeIndex]),n=timeZoneChange(a[swiper.activeIndex]),o="HOUR",l=location.hash,p="";"#/analysis/pv"===l?p=btnUrl+"?cmd=WEL:GETPAGEVIEWBYURL"+o:"#/analysis/ip"===l?p=btnUrl+"?cmd=WEL:GETPAGEVIEWBYIP"+o:"#/analysis/data"===l?p=btnUrl+"?cmd=WEL:GETBYTESBYURL"+o:"#/analysis/status"===l&&2===swiper.activeIndex?p=btnUrl+"?cmd=WEL:GETINFOBYSTATUS"+o:"#/analysis/status"===l&&3===swiper.activeIndex?p=btnUrl+"?cmd=WEL:GETIPBYSTATUS"+o:"#/analysis/crawler"===l&&1===swiper.activeIndex||"#/analysis/sqlinjection"===l&&1===swiper.activeIndex||"#/analysis/fileinclusion"===l&&1===swiper.activeIndex||"#/analysis/xss"===l&&1===swiper.activeIndex?p=btnUrl+"?cmd=WEL:SELECTIP"+o:("#/analysis/crawler"===l&&2===swiper.activeIndex||"#/analysis/sqlinjection"===l&&2===swiper.activeIndex||"#/analysis/fileinclusion"===l&&2===swiper.activeIndex||"#/analysis/xss"===l&&2===swiper.activeIndex)&&(p=btnUrl+"?cmd=WEL:SELECTURL"+o),"#/analysis/pv"===l||"#/analysis/data"===l||"#/analysis/crawler"===l&&2===swiper.activeIndex||"#/analysis/sqlinjection"===l&&2===swiper.activeIndex||"#/analysis/fileinclusion"===l&&2===swiper.activeIndex||"#/analysis/xss"===l&&2===swiper.activeIndex?xhr=$.ajax({type:"get",url:p,data:{url:e,startTime:r,endTime:n,project_id:projectID,timeZone:timeZone},async:!0,cache:!0,dataType:"json",success:function(t){renderChart(t,smChartObj[swiper.activeIndex][0]),s._setChartTitle(smChartObj[swiper.activeIndex][0],e)},error:function(){}}):"#/analysis/ip"===l||"#/analysis/crawler"===l&&1===swiper.activeIndex||"#/analysis/sqlinjection"===l&&1===swiper.activeIndex||"#/analysis/fileinclusion"===l&&1===swiper.activeIndex||"#/analysis/xss"===l&&1===swiper.activeIndex?xhr=$.ajax({type:"get",url:p,data:{ip:e,startTime:r,endTime:n,project_id:projectID,timeZone:timeZone},async:!0,cache:!0,dataType:"json",success:function(t){renderChart(t,smChartObj[swiper.activeIndex][0]),s._setChartTitle(smChartObj[swiper.activeIndex][0],e)},error:function(){}}):"#/analysis/status"===l&&2===swiper.activeIndex?xhr=$.ajax({type:"get",url:p,data:{url:e,status:i,startTime:r,endTime:n,project_id:projectID,timeZone:timeZone},async:!0,cache:!0,dataType:"json",success:function(t){renderChart(t,smChartObj[swiper.activeIndex][0]),s._setChartTitle(smChartObj[swiper.activeIndex][0],e)},error:function(){}}):"#/analysis/status"===l&&3===swiper.activeIndex&&(xhr=$.ajax({type:"get",url:p,data:{ip:e,status:i,startTime:r,endTime:n,project_id:projectID,timeZone:timeZone},async:!0,cache:!0,dataType:"json",success:function(t){renderChart(t,smChartObj[swiper.activeIndex][0]),s._setChartTitle(smChartObj[swiper.activeIndex][0],e)},error:function(){}}))},e.prototype._setChartTitle=function(e,t){var e=e;e.option.title={text:t||"",show:!0,left:"center",textStyle:{color:"#999"},subtext:""},e.myChart.setOption(e.option)},e.prototype._reloadYAxis=function(e){var t=this.opts.chartData,a=t.legend.indexOf(e.name);this.opts.legendIdx=a,this.option.yAxis.data=t.yAxis.data[a],this.myChart.setOption(this.option)},e.prototype._reloadDatatable=function(e){var t=this.opts.chartData,a=t.legend.indexOf(e.name),i="";"hbarSelection"===this.opts.type?$.each(t.series[a].data,function(e,o){i+="<tr><td>"+(e+1)+"</td><td><div class='urlTd' style='width:"+.65*$(".txtData>.countent").width()+"px;''>"+t.yAxis.data[a][e]+"</div></td><td>"+o+"</td></tr>"}):$.each(t.series[a].data,function(e,a){i+="<tr><td>"+(e+1)+"</td><td><div class='urlTd' style='width:"+.65*$(".txtData>.countent").width()+"px;''>"+t.xAxis.data[e]+"</div></td><td>"+a+"</td></tr>"}),renderDatatable(i)},e.prototype._drill=function(e){var t=e.name.replace(/-/g,""),a=t.replace(" ",""),i=a.replace(":",""),o="",s="";6===i.length?(o=(i+"01000000").slice(0,12),s=(Number(i)+1+"01000000").slice(0,12)):(o=(i+"00000000").slice(0,12),s=(1e8*(Number(i)+1)+"").slice(0,12));if(drillTime!=o+"|"+s&&(drillTime=o+"|"+s,o.length<=12)){this.showLoading();getChartData({projectID:projectID,startTime:o,endTime:s,url:btnUrl,rpType:this.opts.type,isSmallChartLoad:"false",chart:[this],timeZone:timeZone})}},e.prototype._resetVMap=function(e){var t=this.opts.chartData,a=t.legend.indexOf(e.name),i=0;0===a?(this.option.visualMap.inRange.color=["#94bdce","#00628b"],$.each(t.series[a].data,function(e,t){t.value>i&&(i=t.value)})):1===a?(this.option.visualMap.inRange.color=["#cbe7f1","#0089bb"],$.each(t.series[a].data,function(e,t){t.value>i&&(i=t.value)})):(this.option.visualMap.inRange.color=["#d9f3f8","#32bbdb"],$.each(t.series[a].data,function(e,t){t.value>i&&(i=t.value)})),this.option.visualMap.max=i||1e3,this.myChart.setOption(this.option)},e.prototype._buildLine=function(e){var e=e,t=this,a={color:t.opts.defaultColor,grid:{top:"80px",left:"6%",right:"6%",bottom:"3%",containLabel:!0},legend:{left:"20%",top:"47px",data:[],textStyle:{color:"#999"}},toolbox:{show:!0,right:"5%",top:"0",iconStyle:{normal:{borderColor:"#999"},emphasis:{borderColor:"#999999"}},feature:{myTool1:{show:!0,title:Dynamic.analysis_tools1,icon:"image://img/t1.png",onclick:function(){for(var e=0;e<a.series.length;e++)t.option.series[e].type="line",t.option.series[e].showSymbol=!1;$.each(t.option.series,function(e,a){a.areaStyle={normal:{color:t.opts.colorTrans[e]}}}),t.option.xAxis={boundaryGap:0},t.myChart.setOption(t.option)}},myTool2:{show:!0,title:Dynamic.analysis_tools2,icon:"image://img/t2.png",onclick:function(){for(var e=0;e<a.series.length;e++)t.option.series[e].type="line",t.option.series[e].areaStyle=!1,t.option.series[e].showSymbol=!0;t.option.xAxis={boundaryGap:0},t.myChart.setOption(t.option)}},myTool3:{show:!0,title:Dynamic.analysis_tools3,icon:"image://img/t3.png",onclick:function(){for(var e=0;e<t.option.series.length;e++)t.option.series[e].type="bar";t.option.xAxis={boundaryGap:["20%","20%"],axisTick:{alignWithLabel:!0}},t.myChart.setOption(t.option),t.option.xAxis={boundaryGap:0,axisTick:{alignWithLabel:!0}}}},myTool4:{show:!0,title:Dynamic.analysis_tools4,icon:"image://img/t4.png",onclick:function(){for(var e=0;e<t.option.series.length;e++)t.option.series[e].type="scatter";t.option.xAxis={boundaryGap:["10%","10%"],axisTick:{alignWithLabel:!0}},t.myChart.setOption(t.option),t.option.xAxis={boundaryGap:0,axisTick:{alignWithLabel:!0}}}},saveAsImage:{title:Dynamic.analysis_tools6,backgroundColor:"rgba(0,0,0,0)"},myTool5:{show:!0,title:Dynamic.analysis_tools5,icon:"image://img/kj_sprite_11.gif",onclick:function(){t._resetDate(t)}}}},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#999"}}},xAxis:{name:e.xAxis.name,type:"category",data:e.xAxis.data,axisLine:{lineStyle:{color:"#999"}},solitLine:{show:!1},boundaryGap:!1},yAxis:[],dataZoom:[{type:"inside",start:0,end:100,throttle:0}],series:[]};return $.each(e.series,function(e,i){t.opts.legend===!0&&(a.legend.data[e]={name:i.name,icon:"roundRect"}),a.yAxis[e]={name:i.name||"",type:"value",scale:{power:1,precision:1},axisLine:{lineStyle:{color:"#999"}},splitNumber:3,splitLine:{show:!1}},a.series[e]={type:"line",symbolSize:10,showSymbol:!1,name:i.name,yAxisIndex:e,lineStyle:{normal:{color:t.opts.defaultColor[e]}},areaStyle:{normal:{color:t.opts.colorTrans[e]}},data:i.data},"lineplot"===t.opts.type?(a.series[e].type="line",a.series[e].areaStyle=!1,a.series[e].showSymbol=!0):"barplot"===t.opts.type?a.series[e].type="bar":"scatterplot"===t.opts.type&&(a.series[e].type="scatter")}),"barplot"===t.opts.type?(a.xAxis.boundaryGap=["20%","20%"],a.xAxis.axisTick={alignWithLabel:!0}):"scatterplot"===t.opts.type&&(a.xAxis.boundaryGap=["10%","10%"],a.xAxis.axisTick={alignWithLabel:!0}),t.opts.toolboxType&&"close"===t.opts.toolboxType?(a.legend={},a.toolbox.feature={saveAsImage:{title:Dynamic.analysis_tools6,backgroundColor:"rgba(0,0,0,0)"},myTool1:{show:!0,title:Dynamic.analysis_tools7,icon:"image://img/close.png",onclick:function(){var e=swiper.activeIndex;$(".echarts_vBar"+e).css({width:"100%"}),$(".echarts_lBar"+e).css({display:"none"}),chartObj[e][0].resize()}}}):t.opts.toolboxType&&"none"===t.opts.toolboxType?a.toolbox={}:t.opts.toolboxType&&"basic"===t.opts.toolboxType&&(a.toolbox.feature={restore:{title:Dynamic.analysis_tools7},saveAsImage:{title:Dynamic.analysis_tools6,backgroundColor:"rgba(0,0,0,0)"}}),t.opts.showTitle===!1&&(a.title={show:!1},a.grid.top="10px"),"#/analysis/data"===location.hash&&(a.tooltip={trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#999"}},formatter:function(t){return t[0].name+"</br>"+Dynamic.analysis_DataNum+"："+e.tooltip[t[0].dataIndex]}}),a},e.prototype._buildTree=function(e){var e=e,t=this,a={color:t.opts.treeColor,tooltip:{trigger:"item",formatter:"{b}</br> "+e.tooltip+"&nbsp;:&nbsp;{c}"},series:[{name:"",type:"treemap",breadcrumb:{show:!1},itemStyle:{normal:{label:{show:!0,formatter:"{b}"},borderWidth:1,borderColor:"#e7e7e7"},emphasis:{label:{show:!0}}},data:e.series[0].data}]};return"#/analysis/data"===location.hash&&(a.tooltip={trigger:"item",formatter:function(t){return t.name+"</br>"+Dynamic.analysis_DataNum+"："+e.tooltip[t.dataIndex]}}),a},e.prototype._buildMap=function(e){var e=e,t=this,a={color:["#00628b","#0089bb","#32bbdb"],tooltip:{trigger:"item",formatter:function(e){return isNaN(e.value)&&(e.value=0),"数据流量"==e.seriesName?e.name+"<br />"+e.seriesName+":"+t.opts.chartData.tooltip[e.dataIndex]:e.name+"<br />"+e.seriesName+"&nbsp;:&nbsp;"+e.value}},legend:{orient:"vertical",top:"47px",left:"5%",data:[],textStyle:{color:"#999999"},selectedMode:"single"},visualMap:{min:0,max:200,left:"5%",top:"bottom",inRange:{color:["#94bdce","#00628b"]},calculable:!0,textStyle:{color:"#999999"}},graphic:[{id:"left-btn",type:"circle",shape:{r:20},style:{text:"<",fill:"#eee"},top:"100px",left:"5%"},{id:"right-btn",type:"circle",shape:{r:20},style:{text:">",fill:"#eee"},top:"100px",right:"5%"}],series:[]};$.each(e.series,function(e,i){a.legend.data[e]={name:i.name,icon:"roundRect"},a.series[e]={name:i.name,type:"map",mapType:t.opts.mapType,roam:!0,itemStyle:{normal:{areaColor:"#fff",borderColor:"#111",textStyle:"#999999"},emphasis:{areaColor:"#b2e4f6",borderColor:"#999999",borderWidth:1}},data:i.data},"World"===t.opts.mapType?a.series[e].label={}:a.series[e].label={normal:{show:!0,textStyle:{color:"#999"}},emphasis:{show:!0,textStyle:{color:"#000"}}}});var i=0;return $.each(e.series[0].data,function(e,t){t.value>i&&(i=t.value)}),a.visualMap.max=i||1e3,$(".region-select-group").eq(0).css({display:"inline-block"}),$("button",$(".region-select-group").eq(1)).removeClass(),$("button",$(".region-select-group").eq(1)).addClass("btn btn-outline dropdown-toggle control"),a},e.prototype._buildHBar=function(e){var e=e,t={color:["#5ab8de"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(t){var a="";return a=void 0===t[0].value?"":t[0].value,"#/analysis/data"===location.hash?t[0].name+"</br>"+Dynamic.analysis_DataNum+"："+e.tooltip[t[0].dataIndex]:t[0].name+"</br>"+e.xAxis.name+"："+a}},legend:{data:[],left:"center",top:"0",textStyle:{color:"#999999"},selectedMode:"single"},dataZoom:[{type:"slider",show:!0,yAxisIndex:[0],top:"80px",right:"69px",startValue:0,endValue:9,textStyle:{color:"#999999"}}],grid:{top:"80px",left:"2%",right:"100px",bottom:"3%",containLabel:!0},xAxis:{type:"value",name:e.xAxis.name,nameLocation:"end",boundaryGap:[0,.01],axisLine:{lineStyle:{color:"#999999"}}},yAxis:{type:"category",name:e.yAxis.name,nameLocation:"start",inverse:!0,data:e.yAxis.data.map(function(e){var t;return e&&e.length>50?t=e.substring(0,50):e}),axisLine:{lineStyle:{color:"#999999"}}},series:[]};return $.each(e.series,function(e,a){t.legend.data[e]={name:a.name,icon:"roundRect"},t.series[e]={name:a.name,type:"bar",barMinHeight:20,data:a.data}}),t},e.prototype._buildHBarSelection=function(e){var e=e,t={color:["rgba(90,184,222,1)"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[],left:"5%",top:"47px",textStyle:{color:"#999999"},selectedMode:"single"},dataZoom:[{type:"slider",show:!0,yAxisIndex:[0],bottom:"7.5%",right:"71px",startValue:0,endValue:9,textStyle:{color:"#999999"}}],grid:{left:"60px",right:"100px",bottom:"3%",top:"100px",containLabel:!0},xAxis:{type:"value",name:e.xAxis.name,nameLocation:"end",boundaryGap:[0,.01],axisLine:{lineStyle:{color:"#999999"}}},yAxis:{type:"category",name:e.yAxis.name,nameLocation:"start",inverse:!0,data:[],axisLine:{lineStyle:{color:"#999999"}}},series:[]};return e.yAxis.data.length>0&&e.yAxis.data[0]instanceof Array&&(t.yAxis.data=e.yAxis.data[0].map(function(e){var t;return e&&e.length>50?t=e.substring(0,50):e})),$.each(e.series,function(e,a){t.legend.data[e]={name:a.name,icon:"roundRect"},t.series[e]={name:a.name,type:"bar",barMinHeight:20,data:a.data}}),t},e.prototype._buildLineSelection=function(e){var e=e,t=this,a={color:["rgba(90,184,222,1)"],grid:{left:"6%",right:"6%",bottom:"3%",top:"80px",containLabel:!0},legend:{left:"15%",top:"47px",data:[],textStyle:{color:"#999"},selectedMode:"single"},tooltip:{trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"#999"}}},xAxis:{name:e.xAxis.name,type:"category",data:e.xAxis.data,axisLine:{lineStyle:{color:"#999"}},solitLine:{show:!1},boundaryGap:!1},yAxis:[],series:[]};return a.yAxis[0]={name:e.yAxis.name||"",type:"value",scale:{power:1,precision:1},axisLine:{lineStyle:{color:"#999"}},splitNumber:3,splitLine:{show:!1}},$.each(e.series,function(e,i){a.legend.data[e]={name:i.name,icon:"roundRect"},a.series[e]={type:"line",symbolSize:10,showSymbol:!1,name:i.name,lineStyle:{normal:{color:t.opts.defaultColor[0]}},areaStyle:{normal:{color:t.opts.colorTrans[0]}},data:i.data},"lineplot"===t.opts.type?(a.series[e].type="line",a.series[e].areaStyle=!1,a.series[e].showSymbol=!0):"barplot"===t.opts.type?a.series[e].type="bar":"scatterplot"===t.opts.type&&(a.series[e].type="scatter")}),"barplot"===t.opts.type?(a.xAxis.boundaryGap=["20%","20%"],a.xAxis.axisTick={alignWithLabel:!0}):"scatterplot"===t.opts.type&&(a.xAxis.boundaryGap=["10%","10%"],a.xAxis.axisTick={alignWithLabel:!0}),a},e.prototype._buildBarStack=function(e){var e=e,t=this;rpTypeCheck();var a=rpType,i={color:t.opts.defaultColor,grid:{top:"80px",left:"6%",right:"6%",bottom:"3%",containLabel:!0},legend:{left:"20%",top:"47px",data:[],textStyle:{color:"#999"}},toolbox:{show:!0,right:"5%",iconStyle:{normal:{borderColor:"#999"},emphasis:{borderColor:"#999999"}},feature:{myTool3:{show:!0,title:Dynamic.analysis_tools3,icon:"image://img/t3.png",onclick:function(){for(var e=0;e<t.option.series.length;e++)t.option.series[e].type="bar";t.option.xAxis={boundaryGap:["20%","20%"],axisTick:{alignWithLabel:!0}},t.myChart.setOption(t.option),t.option.xAxis={boundaryGap:0,axisTick:{alignWithLabel:!0}}}},myTool1:{show:!0,title:Dynamic.analysis_tools1,icon:"image://img/t1.png",onclick:function(){for(var e=0;e<i.series.length;e++)t.option.series[e].type="line",t.option.series[e].showSymbol=!1;$.each(t.option.series,function(e,a){a.areaStyle={normal:{color:t.opts.colorTrans[e]}}}),t.option.xAxis={boundaryGap:0},t.myChart.setOption(t.option)}},saveAsImage:{title:Dynamic.analysis_tools6,backgroundColor:"rgba(0,0,0,0)"},restore:{title:Dynamic.analysis_tools7}}},tooltip:{trigger:"axis",formatter:function(t){var i,o,s=0,r=[];return e&&e.series[0].data.length>0&&(r=t.map(function(e){return e.value||0}),o=_.reduce(r,function(e,t){return e+t}),o?s=o:o=1,i=t[0].name+"<br />","statusBar"===a&&"CRAWLER"===pageName?($.each(t,function(e,t){i+=Dynamic["analysis_crawler_status"+(e+1)]+":"+r[e]+"("+ForDight(r[e]/o*100,2)+"%)<br />"}),i+=Dynamic.analysis_crawler_statusNum+":"+s):"statusBar"===a?($.each(t,function(e,t){i+=Dynamic["analysis_sql_attackStatus"+(e+1)]+":"+r[e]+"("+ForDight(r[e]/o*100,2)+"%)<br />"}),i+=Dynamic.analysis_sql_attackStatusNum+":"+s):"CRAWLER"===pageName?i=i+Dynamic.analysis_crawler_notCrawler+":"+r[0]+"("+ForDight(r[0]/o*100,2)+"%)<br />"+Dynamic.analysis_crawler_crawlerNum+":"+r[1]+"("+ForDight(r[1]/o*100,2)+"%)<br />"+Dynamic.analysis_crawler_PvNum+":"+s:i+=t[0].seriesName+":"+r[0]),i},axisPointer:{type:"line",lineStyle:{color:"#999"}}},xAxis:{name:e.xAxis.name,type:"category",data:e.xAxis.data,axisLine:{lineStyle:{color:"#999"}},solitLine:{show:!1},boundaryGap:!1},yAxis:[{name:e.yAxis.name,type:"value",axisLine:{lineStyle:{color:"#999"}},splitNumber:3,splitLine:{show:!1}}],dataZoom:[{type:"inside",start:0,end:100,throttle:0}],series:[]};return $.each(e.series,function(a,o){i.legend.data[a]={name:o.name,icon:"roundRect"},i.series[a]={type:"line",symbolSize:10,showSymbol:!1,name:o.name,lineStyle:{normal:{color:t.opts.defaultColor[a]}},stack:e.yAxis.name,areaStyle:{normal:{color:t.opts.colorTrans[a]}},data:o.data},"lineplot"===t.opts.type?(i.series[a].type="line",i.series[a].areaStyle=!1,i.series[a].showSymbol=!0):"barplot"!==t.opts.type&&"barplotStack"!==t.opts.type||(i.series[a].type="bar")}),"barplot"!==t.opts.type&&"barplotStack"!==t.opts.type||(i.xAxis.boundaryGap=["20%","20%"],i.xAxis.axisTick={alignWithLabel:!0}),i},{Chart:e}});